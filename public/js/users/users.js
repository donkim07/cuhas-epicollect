"use strict";window.EC5=window.EC5||{},$(document).ready(function(){var n=$(".page-forgot");if(0===n.length)return!1;var e=$(".gcaptcha"),t=e.text();e.remove(),grecaptcha.ready(function(){var e,i=function(i){function o(){window.EC5.overlay.fadeIn(),grecaptcha.execute(t,{action:"forgot"}).then(function(n){a.prepend('<input type="hidden" name="g-recaptcha-response" value="'+n+'">').submit(),window.setTimeout(window.EC5.overlay.fadeOut(),1e4)})}var a=n.find("form#page-forgot__form");i.preventDefault(),"function"==typeof a.get(0).reportValidity?a.get(0).reportValidity()&&o():o(),window.clearTimeout(e)};$("#send").on("click",function(n){e||(e=window.setTimeout(i(n),1e3))})})}),window.EC5=window.EC5||{},$(document).ready(function(){var n=$(".page-login");if(0===n.length)return!1;var e=$(".gcaptcha"),t=e.text().trim(),i=n.find(".btn-login-apple");e.remove(),window.grecaptcha.ready(function(){var e,i=function(e){function i(){window.EC5.overlay.fadeIn(),window.grecaptcha.execute(t,{action:"passwordless"}).then(function(n){o.prepend('<input type="hidden" name="g-recaptcha-response" value="'+n+'">').submit(),window.setTimeout(window.EC5.overlay.fadeOut(),1e4)})}var o=n.find("form#page-login__passwordless");e.preventDefault(),"function"==typeof o.get(0).reportValidity?o.get(0).reportValidity()&&i():i()};$("#passwordless").on("click",function(n){window.clearTimeout(e),e=window.setTimeout(i(n),1e3)})}),n.find(".show-password-control").on("click",function(){$(this).prop("checked")?n.find("input.password-input").each(function(){$(this).attr("type","text")}):n.find("input.password-input").each(function(n){$(this).attr("type","password")})}),i.on("click",function(n){var e=$("meta[name=appleid-signin-client-id]").attr("content"),t=$("meta[name=appleid-signin-scope]").attr("content"),i=$("meta[name=appleid-signin-redirect-uri]").attr("content"),o=($("meta[name=appleid-signin-state]").attr("content"),$("meta[name=appleid-signin-nonce]").attr("content"));window.AppleID.auth.init({clientId:e,scope:t,redirectURI:i,nonce:o,usePopup:!1}),window.AppleID.auth.signIn()})}),window.EC5=window.EC5||{},$(document).ready(function(){var n=$(".page-profile");if(0===n.length)return!1;var e=n.find(".btn-connect-apple"),t=n.find(".btn-confirm-account-deletion"),i=n.find("#modal__account-deletion");t.on("click",function(n){window.EC5.overlay.fadeIn();var e=window.EC5.SITE_URL+"/api/internal/profile/account-deletion-request";$.ajax({url:e,type:"POST"}).done(function(n){console.log(n),n.data.accepted===!0?window.EC5.toast.showSuccess("Account deletion request sent."):window.EC5.toast.showError("Somethng went wrong")}).fail(function(n){if(n.responseJSON.errors&&n.responseJSON.errors.length>0)for(var e=0;e<n.responseJSON.errors.length;e++)window.EC5.toast.showError(n.responseJSON.errors[e].title)}).always(function(){window.EC5.overlay.fadeOut(),i.modal("hide")})}),e.on("click",function(n){var e=$("meta[name=appleid-signin-client-id]").attr("content"),t=$("meta[name=appleid-signin-scope]").attr("content"),i=$("meta[name=appleid-signin-redirect-uri]").attr("content"),o=$("meta[name=appleid-signin-nonce]").attr("content");AppleID.auth.init({clientId:e,scope:t,redirectURI:i,nonce:o,usePopup:!1}),AppleID.auth.signIn()})}),window.EC5=window.EC5||{},$(document).ready(function(){var n=$(".page-staff-reset");return 0!==n.length&&void n.find(".show-password-control").on("click",function(){$(this).prop("checked")?n.find("input.password-input").each(function(){$(this).attr("type","text")}):n.find("input.password-input").each(function(n){$(this).attr("type","password")})})}),window.EC5=window.EC5||{},$(document).ready(function(){var n=$(".page-signup");if(0===n.length)return!1;var e=$(".gcaptcha"),t=e.text();e.remove(),grecaptcha.ready(function(){var e,i=function(e){function i(){window.EC5.overlay.fadeIn(),grecaptcha.execute(t,{action:"signup"}).then(function(n){o.prepend('<input type="hidden" name="g-recaptcha-response" value="'+n+'">').submit(),window.setTimeout(window.EC5.overlay.fadeOut(),1e4)})}var o=n.find("form#page-signup__form");e.preventDefault(),"function"==typeof o.get(0).reportValidity?o.get(0).reportValidity()&&i():i()};$("#signup").on("click",function(n){window.clearTimeout(e),e=window.setTimeout(i(n),1e3)})}),n.find(".show-password-control").on("click",function(){$(this).prop("checked")?n.find("input.password-input").each(function(){$(this).attr("type","text")}):n.find("input.password-input").each(function(n){$(this).attr("type","password")})})});